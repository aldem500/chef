[mysqld]
bind-address=<%= node[:mysql2][:bind] %>
log-error=/var/log/mysql2/mysql.log
log_bin=/var/log/mysql2/mysql-bin
datadir=<%= node[:mysql2][:datadir] %>
socket=/var/run/mysqld2/mysqld.sock
pid-file=<%= node[:mysql2][:datadir] %>/<%= node[:hostname] %>.pid

binlog_format = 'MIXED'
max_connect_errors=1000000
max_connections=1000
connect_timeout=60
log_warnings=2
expire_logs_days=7
relay-log=relay-bin

innodb_buffer_pool_size = <%= node[:mysql2][:innodb_buffer_pool_size] %>
innodb_log_file_size = <%= node[:mysql2][:innodb_log_file_size] %>
skip_innodb_doublewrite
skip-external-locking
skip-name-resolve
thread_stack=192K
innodb_flush_method = O_DIRECT
innodb_flush_log_at_trx_commit = 2
innodb_support_xa = 0
innodb_thread_concurrency=<%= node[:mysql][:innodb_thread_concurrency] %>
innodb_file_per_table
transaction-isolation=READ-COMMITTED
query_cache_size = 0
query_cache_type = 0

replicate-same-server-id = 0

server-id = <%= node[:mysql2][:server_id] %>
